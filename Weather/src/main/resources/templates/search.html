<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>How is the Weather</title>
    <link rel="stylesheet" th:href="@{/css/tailwind.css}">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script th:src="@{/js/script.js}"></script>
</head>

<!-- 배경 -->
<body th:class="'min-h-screen flex items-center justify-center ' + ${seasonBgClass}">
<div class="w-full max-w-5xl mx-auto bg-white shadow-lg rounded-3xl px-10 py-10">

    <!-- 상단 타이틀 -->
    <header class="text-center mb-8">
        <h1 class="text-5xl font-black leading-tight">
        <span class="block">
            <!-- H 만 계절 색상 -->
            <span th:class="${seasonTitleClass}">H</span><span class="text-slate-900">ow </span>
            <!-- i 만 계절 색상 -->
            <span th:class="${seasonTitleClass}">i</span><span class="text-slate-900">s the</span>
        </span>

            <span class="block">
            <!-- Weather 전체를 계절 색상 -->
            <span th:class="${seasonTitleClass}">Weather</span>
        </span>
        </h1>

        <p class="mt-2 tracking-[0.3em] text-xs text-slate-500">
            PLAN TOUR DAY
        </p>
    </header>


    <!-- 🔍 검색 영역 + 자동완성 -->
    <section class="flex justify-center mb-10">
        <div class="relative w-96">
            <form id="search-form" th:action="@{/search}" method="get" class="flex gap-2">
                <input
                        id="search-input"
                        type="text"
                        name="q"
                        th:value="${keyword}"
                        placeholder="예) 서울, 종로, 인천 서구"
                        class="w-96 px-4 py-2 border border-slate-300 rounded-lg text-sm
                               focus:outline-none focus:ring-2 focus:ring-[#8ac8ff] focus:border-[#8ac8ff]"
                        autocomplete="off"
                />
                <button
                        type="submit"
                        class="w-24 py-2 text-sm font-semibold bg-slate-800 text-white rounded-lg
                               hover:bg-slate-900 transition">
                    검색
                </button>
            </form>

            <!-- ▼ 자동완성 드롭다운 -->
            <ul id="suggest-list"
                class="absolute z-10 mt-1 w-full bg-white border border-slate-200 rounded-lg shadow
                       text-sm max-h-60 overflow-y-auto hidden">
                <!-- JS 로 채워짐 -->
            </ul>
        </div>
    </section>

    <!-- 메인 3개 카드 -->
    <section class="grid grid-cols-1 md:grid-cols-3 gap-6">

        <!-- 카드 1: 오늘의 날씨는? -->
        <!-- 선택된 지역이 있을 때: /region/{city}/{district} 로 이동 -->
        <a th:if="${selectedRegion != null}"
           th:href="@{/region/{city}/{district}(
                        city=${selectedRegion.parentRegion},
                        district=${selectedRegion.childRegion}
                    )}"
           class="block border border-slate-300 rounded-xl bg-white hover:shadow-md transition">
            <div class="p-4 flex flex-col items-center">
                <h2 class="mb-3 text-lg font-semibold">오늘의 날씨는?</h2>

                <img th:src="@{/images/icons/seasons_bird/{file}(file=${seasonBirdImage})}"
                     alt="계절 새"
                     class="mt-1 w-40 h-40 object-contain mb-3">

                <p class="text-xs text-slate-500 text-center leading-relaxed">
                    클릭하면 오늘 날씨와 옷차림을 보여줘요
                </p>
                <p class="mt-2 text-xs text-slate-400 text-center leading-relaxed"
                   th:text="${selectedRegion.parentRegion} + ' ' + ${selectedRegion.childRegion} + ' 기준'">
                </p>
            </div>
        </a>

        <!-- 선택된 지역이 없을 때: 링크 없이 안내만 -->
        <div th:if="${selectedRegion == null}"
             class="block border border-slate-300 rounded-xl bg-white">
            <div class="p-4 flex flex-col items-center">
                <h2 class="mb-3 text-lg font-semibold">오늘의 날씨는?</h2>

                <img th:src="@{/images/icons/seasons_bird/{file}(file=${seasonBirdImage})}"
                     alt="계절 새"
                     class="mt-1 w-40 h-40 object-contain mb-3">

                <p class="mt-3 text-xs text-slate-500 text-center">
                    위 검색창에 지역을 입력하면<br>해당 지역 기준으로 날씨를 보여줘요
                </p>
            </div>
        </div>

        <!-- 카드 2: 지금의 절기는? -->
        <div class="block border border-slate-300 rounded-xl bg-white cursor-default">
            <div class="p-4 flex flex-col items-center">
                <h2 class="mb-3 text-lg font-semibold">지금의 절기는?</h2>

                <img th:src="@{/images/icons/solar_term/sun.png}"
                     alt="절기 아이콘"
                     class="w-40 h-40 object-contain mb-3">

                <div class="flex flex-col items-center text-center text-xs leading-tight">
                    <p class="text-slate-500">
                        🌞 현재 절기 : <span th:text="${solarTerm}"></span>
                    </p>
                    <p class="text-slate-400 whitespace-pre-line -mt-0.5">
                        <span th:text="${solarTermDesc}"></span>
                    </p>
                </div>

            </div>
        </div>

        <!-- 카드 3: 오늘의 문구 -->
        <div class="block border border-slate-300 rounded-xl bg-white cursor-default">
            <div class="p-4 flex flex-col items-center">
                <h2 class="mb-6 text-lg font-semibold">오늘의 문구</h2>

                <div th:class="'w-48 min-h-[150px] flex items-center justify-center mb-4
                rounded-xl border-2 px-4 py-3 text-center shadow-sm '
                + ${memoBoxClass}">
                    <span class="text-base text-slate-800 leading-relaxed font-medium whitespace-pre-line"
                          th:text="${todayMemo}">랜덤 문구
                    </span>
                </div>

                <p class="mt-3 text-xs text-slate-500 text-center">
                    오늘 하루를 위한 작은 한 줄이에요
                </p>
            </div>
        </div>
    </section>
</div>

</body>
</html>
